{% extends 'base.html' %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Chats</title>
<style>
    .nav-link.name{
        margin: 5px;
        color:#3a2e79;
    }
    .close {
        cursor: pointer;
        position: absolute;
        top: 50%;
        right: 0%;
        padding: 12px 16px;
        transform: translate(0%, -50%);
    }   
    .close:hover {background: #bbb;}
    .card.mb-3:hover{
        background-color: #c7d4e7;
    }

</style>

</head>
<body>
        <!-- <h2>Open Chats</h2> -->
        <div>
            {% load static %}
            <img src="{% static 'navpic.png' %}" alt="navpic" width="1090" height="930">
        </div>



        {% for chat in chats %}
            <div class="card mb-3" style="max-width: 54" >
                {% if chat.receiver.id == chat.sender.id %}

                <span class="close">&times;</span>


            <a class="nav-link name" href="/chat/{{ chat.receiver.username }}"><h3>{{ chat.receiver.username }}</h3>
             {% else %}

             {% if chat.sender.id == user.id %}

             <a class="nav-link name" href="/chat/{{ chat.receiver.username }}"><h3>{{ chat.receiver.username }}</h3>

                {% else %}

                <a class="nav-link name" href="/chat/{{ chat.sender.username }}"><h3>{{ chat.sender.username }}</h3>

                {% endif %}
                {% endif %}
                {% if chat.sender.id == user.id %}
            <p>You: {{ chat.content }}</p></a>
            {% else %}
            <p>{{chat.sender.username}} : {{ chat.content }}</p></a>
            {% endif %}
            </div>

        {% endfor %}

    
<script>
    var closebtns = document.getElementsByClassName("close");
    var i;
    
    for (i = 0; i < closebtns.length; i++) {
      closebtns[i].addEventListener("click", function() {
        this.parentElement.style.display = 'none';
      });
    }
</script>








   
</body>
</html>

{% endblock %}